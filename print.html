<!DOCTYPE HTML>
<html lang="en" class="ayu" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>libremidi documentation</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "ayu" : "ayu";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('ayu')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="foreword.html"><strong aria-hidden="true">1.</strong> Foreword</a></li><li class="chapter-item expanded affix "><li class="part-title">Getting started</li><li class="chapter-item expanded "><a href="compiling.html"><strong aria-hidden="true">2.</strong> Compiling</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="header-only.html"><strong aria-hidden="true">2.1.</strong> Header-only support</a></li></ol></li><li class="chapter-item expanded "><a href="enumerating.html"><strong aria-hidden="true">3.</strong> Enumerating ports</a></li><li class="chapter-item expanded "><a href="midi-1-in.html"><strong aria-hidden="true">4.</strong> MIDI 1 in</a></li><li class="chapter-item expanded "><a href="midi-1-out.html"><strong aria-hidden="true">5.</strong> MIDI 1 out</a></li><li class="chapter-item expanded "><a href="midi-2-in.html"><strong aria-hidden="true">6.</strong> MIDI 2 in</a></li><li class="chapter-item expanded "><a href="midi-2-out.html"><strong aria-hidden="true">7.</strong> MIDI 2 out</a></li><li class="chapter-item expanded "><a href="file.html"><strong aria-hidden="true">8.</strong> MIDI file support</a></li><li class="chapter-item expanded affix "><li class="part-title">Advanced features</li><li class="chapter-item expanded "><a href="midi-2-integrations.html"><strong aria-hidden="true">9.</strong> MIDI 2 integrations</a></li><li class="chapter-item expanded "><a href="hotplug.html"><strong aria-hidden="true">10.</strong> Hotplug support</a></li><li class="chapter-item expanded "><a href="error-handling.html"><strong aria-hidden="true">11.</strong> Error handling</a></li><li class="chapter-item expanded "><a href="configuration.html"><strong aria-hidden="true">12.</strong> Custom configuration</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="context-sharing.html"><strong aria-hidden="true">12.1.</strong> Context sharing</a></li><li class="chapter-item expanded "><a href="polling.html"><strong aria-hidden="true">12.2.</strong> External polling</a></li><li class="chapter-item expanded "><a href="timestamping.html"><strong aria-hidden="true">12.3.</strong> Timestamping</a></li></ol></li><li class="chapter-item expanded "><a href="queue.html"><strong aria-hidden="true">13.</strong> Queue vs callbacks</a></li><li class="chapter-item expanded affix "><li class="part-title">Reference</li><li class="chapter-item expanded "><a href="backends.html"><strong aria-hidden="true">14.</strong> Backends</a></li><li class="chapter-item expanded "><a href="examples.html"><strong aria-hidden="true">15.</strong> Examples overview</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">libremidi documentation</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="funky-midi-with-libremidi"><a class="header" href="#funky-midi-with-libremidi">Funky MIDI with <a href="https://github.com/celtera/libremidi">libremidi</a></a></h1>
<div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><h1 id="using-libremidi-in-header-only-mode"><a class="header" href="#using-libremidi-in-header-only-mode">Using libremidi in header-only mode</a></h1>
<p>The library can be used header-only, with minimal modifications to your build system if you aren't using CMake:</p>
<ul>
<li>
<p>Define <code>LIBREMIDI_HEADER_ONLY=1</code></p>
</li>
<li>
<p>Define macros for the APIs you wish to build. The possible macros are as follows:</p>
<ul>
<li>macOS: <code>LIBREMIDI_COREMIDI=1</code> and link against <code>-framework CoreMIDI -framework CoreAudio -framework CoreFoundation</code>.</li>
<li>Linux: <code>LIBREMIDI_ALSA=1</code> and link against <code>-lasound -phtread</code>.</li>
<li>Windows (WinMM): <code>LIBREMIDI_WINMM=1</code> and link against <code>winmm</code>.</li>
<li>Windows (UWP): <code>LIBREMIDI_WINUWP=1</code> ; note that there is complex linking logic detailed in the CMakeLists.txt when using UWP.</li>
<li>emscripten: <code>LIBREMIDI_EMSCRIPTEN=1</code>.</li>
<li>Any platform with JACK: <code>LIBREMIDI_JACK=1</code>.</li>
</ul>
</li>
<li>
<p>Add the <code>include</code> folder to your include path.</p>
</li>
<li>
<p><code>#include &lt;libremidi/libremidi.hpp&gt;</code> in your source code.</p>
</li>
</ul>
<p>For instance, to build the <code>midiprobe</code> example on Linux with only ALSA support, one would run:</p>
<pre><code>$ g++ ~/libremidi/tests/midiprobe.cpp \
      -std=c++20 \
      -DLIBREMIDI_ALSA=1 \
      -DLIBREMIDI_HEADER_ONLY=1 \
      -I ~/libremidi/include \
      -lasound -pthread
</code></pre>
<p>To build it on macOS, one would run:</p>
<pre><code>$ clang++ ~/libremidi/tests/midiprobe.cpp \
      -std=c++20 \
      -DLIBREMIDI_COREMIDI=1 \
      -DLIBREMIDI_HEADER_ONLY=1 \
      -I ~/libremidi/include \
      -framework CoreMIDI -framework CoreAudio -framework CoreFoundation
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="enumerating-ports"><a class="header" href="#enumerating-ports">Enumerating ports</a></h1>
<p>The required header is <code>#include &lt;libremidi/libremidi.hpp&gt;</code>.</p>
<p>Inputs:</p>
<pre><code class="language-C++">libremidi::observer obs;
for(const libremidi::input_port&amp; port : obs.get_input_ports()) {
  std::cout &lt;&lt; port.port_name &lt;&lt; "\n";
}
</code></pre>
<p>Outputs:</p>
<pre><code class="language-C++">libremidi::observer obs;
for(const libremidi::output_port&amp; port : obs.get_output_ports()) {
  std::cout &lt;&lt; port.port_name &lt;&lt; "\n";
}
</code></pre>
<p>See <code>midiprobe.cpp</code> for a simple example.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="reading-midi-1-messages-from-a-device-through-callbacks"><a class="header" href="#reading-midi-1-messages-from-a-device-through-callbacks">Reading MIDI 1 messages from a device through callbacks</a></h1>
<pre><code class="language-C++">// Set the configuration of our MIDI port
// Note that the callback will be invoked from a separate thread,
// it is up to you to protect your data structures afterwards.
// For instance if you are using a GUI toolkit, don't do GUI actions
// in that callback !
auto my_callback = [](const libremidi::message&amp; message) {
  // how many bytes
  message.size();
  // access to the individual bytes
  message[i];
  // access to the timestamp
  message.timestamp;
};

// Create the midi object
libremidi::midi_in midi{ 
  libremidi::input_configuration{ .on_message = my_callback } 
};

// Open a given midi port. 
// The argument is a libremidi::input_port gotten from a libremidi::observer. 
midi.open_port(/* a port */);
// Alternatively, to get the default port for the system: 
midi.open_port(libremidi::midi1::in_default_port());

</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="sending-midi-1-messages-to-a-device"><a class="header" href="#sending-midi-1-messages-to-a-device">Sending MIDI 1 messages to a device</a></h1>
<pre><code class="language-C++">// Create the midi object
libremidi::midi_out midi;

// Open a given midi port. Same as for input:
midi.open_port(libremidi::midi2::out_default_port());

// Option A: send fixed amount of bytes for most basic cases
midi.send_message(144, 110, 40); // Overloads exist for 1, 2, 3 bytes

// Option B: send a raw byte array
unsigned char bytes[3] = { 144, 110, 40 };
midi.send_message(bytes, sizeof(bytes));

// Option C: std::span&lt;unsigned char&gt;
// This allows to pass std::vector, std::array and the likes
midi.send_message(std::span&lt;unsigned char&gt;{ ... your span-compatible data-structure ... });

// Option D: helpers with the libremidi::message class
// See libremidi/message.hpp for the full list
midi.send_message(libremidi::message::note_on(channel, note, velocity));
midi.send_message(libremidi::message::control_change(channel, control, value));
midi.send_message(libremidi::message::pitch_bend(channel, value));
midi.send_message(libremidi::message{ /* a message */ });
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="reading-midi-2-messages-from-a-device-through-callbacks"><a class="header" href="#reading-midi-2-messages-from-a-device-through-callbacks">Reading MIDI 2 messages from a device through callbacks</a></h1>
<p>Note that MIDI 2 support is still experimental and subject to change.
Note also that the MIDI 1 and MIDI 2 send functions (not yet receive) are useable no matter
the kind of backend used (e.g. one can send UMPs to MIDI 1 backends and MIDI 1 messages to MIDI 2 backends). This conversion is done in a best-effort way.</p>
<pre><code class="language-C++">// Set the configuration of our MIDI port, same warnings apply than for MIDI 1.
// Note that an UMP message is always at most 4 * 32 bits = 16 bytes.
// Added to the 64-bit timestamp this is 24 bytes for a libremidi::ump 
// which is definitely small enough to be passed by value.
// Note that libremidi::ump is entirely constexpr.
auto my_callback = [](libremidi::ump message) {
  // how many bytes
  message.size();
  // access to the individual bytes
  message[i];
  // access to the timestamp
  message.timestamp;
};

// Create the midi object
libremidi::midi_in midi{ 
  libremidi::ump_input_configuration{ .on_message = my_callback }
};


// Open a given midi port. 
// The argument is a libremidi::input_port gotten from a libremidi::observer. 
midi.open_port(/* a port */);
// Alternatively, to get the default port for the system: 
midi.open_port(libremidi::midi2::in_default_port());

</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="sending-midi-2-messages-to-a-device"><a class="header" href="#sending-midi-2-messages-to-a-device">Sending MIDI 2 messages to a device</a></h1>
<pre><code class="language-C++">// Create the midi object
libremidi::midi_out midi;

// Open a given midi port. Same as for input:
midi.open_port(libremidi::midi2::out_default_port());

// Option A: send fixed amount of bytes for most basic cases
midi.send_ump(A, B, C, D); // Overloads exist for 1, 2, 3, 4 uint32_t

// Option B: send a raw byte array
uint32_t bytes[2] = { ... };
midi.send_ump(bytes, sizeof(bytes));

// Option C: std::span&lt;uint32_t&gt;
// This allows to pass std::vector, std::array and the likes
midi.send_ump(std::span&lt;uint32_t&gt;{ ... your span-compatible data-structure ... });

// Option D: helpers with the libremidi::ump class
// The helpers haven't been implemented yet :(
midi.send_ump(libremidi::ump{ /* a message */ });
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="midi-file-io-usage"><a class="header" href="#midi-file-io-usage">MIDI file I/O usage</a></h1>
<h2 id="reading-a-mid-file"><a class="header" href="#reading-a-mid-file">Reading a .mid file</a></h2>
<p>See <code>midifile_dump.cpp</code> for a more complete example.</p>
<pre><code class="language-C++">// Read raw from a MIDI file
std::ifstream file{"path/to/a.mid", std::ios::binary};

std::vector&lt;uint8_t&gt; bytes;
bytes.assign(std::istreambuf_iterator&lt;char&gt;(file), std::istreambuf_iterator&lt;char&gt;());

// Initialize our reader object
libremidi::reader r;

// Parse
libremidi::reader::parse_result result = r.parse(bytes);

// If parsing succeeded, use the parsed data
if(result != libremidi::reader::invalid) {
  for(auto&amp; track : r.tracks) {
    for(auto&amp; event : t.events) {
      std::cout &lt;&lt; (int) event.m.bytes[0] &lt;&lt; '\n';
    }
  }
}
</code></pre>
<h2 id="writing-a-mid-file"><a class="header" href="#writing-a-mid-file">Writing a .mid file</a></h2>
<pre><code class="language-C++">// Initialize a writer object
libremidi::writer writer;

// Create tracks and events declaratively by changing the track vector directly:
writer.tracks.push_back(
  libremidi::midi_track{
    libremidi::track_event{0, 0, libremidi::message::note_on(1, 45, 35)},
    libremidi::track_event{140, 0, libremidi::message::note_off(1, 45, 0)},
  }
);

// Or through a builder API:
{
  int tick = 500;
  int track = 3;
  libremidi::message msg = libremidi::message::note_on(1, 45, 35);

  // Tracks will be added as needed within safe limits
  writer.add_event(tick, track, msg);
}

// Read raw from a MIDI file
std::ofstream output{"output.mid", std::ios::binary};
writer.write(output);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="midi-2-integrations"><a class="header" href="#midi-2-integrations">MIDI 2 integrations</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="device-connection--disconnection-notification"><a class="header" href="#device-connection--disconnection-notification">Device connection / disconnection notification</a></h1>
<pre><code class="language-C++">// The callbacks will be called when the relevant event happens.
// Note that they may be called from other threads than the main thread.

libremidi::observer_configuration conf{
    .input_added = [&amp;] (const libremidi::input_port&amp; id) {
      std::cout &lt;&lt; "Input connected: " &lt;&lt; id.port_name &lt;&lt; std::endl;
    },
    .input_removed = [&amp;] (const libremidi::input_port&amp; id) {
      std::cout &lt;&lt; "Input removed: " &lt;&lt; id.port_name &lt;&lt; std::endl;
    },
    .output_added = [&amp;] (const libremidi::output_port&amp; id) {
      std::cout &lt;&lt; "Output connected: " &lt;&lt; id.port_name &lt;&lt; std::endl;
    },
    .output_removed = [&amp;] (const libremidi::output_port&amp; id) {
      std::cout &lt;&lt; "Output removed: " &lt;&lt; id.port_name &lt;&lt; std::endl;
}};

libremidi::observer obs{std::move(conf)};
</code></pre>
<p>See <code>midiobserve.cpp</code> or <code>emscripten_midiin.cpp</code> for an example.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="error-handling"><a class="header" href="#error-handling">Error handling</a></h1>
<p>The default error handling is done with exceptions.
If exceptions are undesirable, it is also possible to set a callback function which will be invoked upon error, for the <code>midi_in</code> and <code>midi_out</code> classes.</p>
<p>(Some classes may still throw, such as when creating invalid MIDI messages with the <code>libremidi::message</code> helpers, or the <code>observer</code> classes).</p>
<pre><code class="language-C++">// Create the configuration
libremidi::input_configuration conf{
    .on_message = /* usual message callback */
  , .on_error = [] (libremidi::midi_error code, std::string_view info) {
      // ... log error however you want
    }
  , .on_warning = [] (libremidi::midi_error code, std::string_view info) {
      // ... log warning however you want
    }
};

// Create the midi object
libremidi::midi_in midi{conf};
</code></pre>
<p>Ditto for <code>midi_out</code> and <code>midi_observer</code>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="advanced-configuration"><a class="header" href="#advanced-configuration">Advanced configuration</a></h1>
<p>The <code>midi_in</code>, <code>midi_out</code> and <code>midi_observer</code> objects are configured through a <code>input_configuration</code> (resp. <code>output_</code>, etc.) object passed in argument to the constructor.</p>
<h2 id="custom-back-end-configuration"><a class="header" href="#custom-back-end-configuration">Custom back-end configuration</a></h2>
<p>Additionnally, each back-end supports back-end specific configuration options, to enable users to tap into advanced features of a given API while retaining the general C++ abstraction.</p>
<p>For instance, this enables to set output buffer sizes, chunking parameters, etc. for back-ends which support the feature.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="context-sharing"><a class="header" href="#context-sharing">Context sharing</a></h1>
<p>This allows to share a single context across multiple MIDI objects (such as a <code>jack_client_t</code> with JACK, a PipeWire main loop &amp; filter, or a <code>MIDIClientRef</code> on macOS with CoreMIDI).
If no context is passed, each object will create one as they used to.</p>
<p>Example:</p>
<pre><code class="language-C++">#include &lt;libremidi/configurations.hpp&gt;

...

libremidi::midi_in in{
    libremidi::input_configuration{.on_message = ...}
  , libremidi::alsa_seq::input_configuration{
      .client_name = "my client"
  } 
};
</code></pre>
<p>If one simply wants to share a context across libremidi objects (for instance, a single context shared across an <code>observer</code>, <code>midi_ins</code> and <code>midi_outs</code>), the following methods will create appropriate configurations from an observer's configuration:</p>
<pre><code class="language-C++">// Create an observer with a fixed back-end
libremidi::observer obs{
    libremidi::observer_configuration{}
  , libremidi::observer_configuration_for(libremidi::API::JACK_MIDI)};

// The in and out will share the JACK client of the observer.
// Note that the observer has to outlive them.
libremidi::midi_in in{
    libremidi::input_configuration{.on_message = ...}
  , libremidi::midi_in_configuration_for(obs) 
};

libremidi::midi_out out{
    libremidi::output_configuration{...}
  , libremidi::midi_out_configuration_for(obs) 
};
</code></pre>
<p>The relevant examples are:</p>
<ul>
<li><code>coremidi_share.cpp</code> for a complete example for CoreMIDI.</li>
<li><code>jack_share.cpp</code> for a complete example for JACK.</li>
<li><code>pipewire_share.cpp</code> for a complete example for PipeWire.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="custom-polling"><a class="header" href="#custom-polling">Custom polling</a></h1>
<p>Traditionnally, RtMidi (and most other MIDI libraries) opened a dedicated MIDI thread from which messages are read, and then transferred to the rest of the app.</p>
<p>If your app is based on an event loop that can poll file descriptors, such as <code>poll()</code>, the relevant back-ends will allow to instead control polling manually by providing you with the file descriptors,
which can then be injected into your app's main loop.</p>
<p>Thus, this enables complete control over threading (and can also remove the need for synchronisation as this allows to make a callback-based yet single-threaded app, for simple applications which do not wish to reimplement MIDI filtering &amp; parsing for back-ends such as ALSA Sequencer or RawMidi).</p>
<p>Since this feature is pretty complicated to implement, we recommend checking the examples:</p>
<p>See:</p>
<ul>
<li><code>poll_share.cpp</code> for a complete example for ALSA RawMidi (recommended).</li>
<li><code>alsa_share.cpp</code> for a complete example for ALSA Seq.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="timestamping"><a class="header" href="#timestamping">Timestamping</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="queue-input"><a class="header" href="#queue-input">Queue input</a></h1>
<p>The old queued input mechanism present in RtMidi and previous versions of the library has been moved out of the code as it can be built entirely on the callback mechanism and integrated with the user application's event processing queue instead.</p>
<p>A basic example is provided in <code>qmidiin.cpp</code>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="feature-matrix"><a class="header" href="#feature-matrix">Feature matrix</a></h1>
<p>This table shows which feature is supported by which backend so far, for advanced features.</p>
<p>It may be because the backend does not provide the ability at all, or because it has not been implemented yet.</p>
<div class="table-wrapper"><table><thead><tr><th></th><th>ALSA Raw</th><th>ALSA Seq</th><th>JACK</th><th>WinMM</th><th>UWP</th><th>CoreMIDI</th><th>Emscripten</th></tr></thead><tbody>
<tr><td>Virtual ports</td><td>N/A</td><td>Yes</td><td>Yes</td><td>N/A</td><td>No</td><td>Yes</td><td>N/A</td></tr>
<tr><td>Observer</td><td>Yes</td><td>Yes</td><td>No</td><td>Yes</td><td>Yes</td><td>Yes</td><td>Yes</td></tr>
<tr><td>Chunking</td><td>No</td><td>No</td><td>No</td><td>No</td><td>No</td><td>No</td><td>No</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="examples-overview"><a class="header" href="#examples-overview">Examples overview</a></h1>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
